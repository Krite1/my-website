<div id="equilibrium-calculator">
  <h3>Kalkulator Perhitungan Keseimbangan Kimia</h3>
  <p>Gunakan kalkulator ini untuk menghitung konstanta keseimbangan (\(K_c\)) atau konsentrasi reaktan dan produk dalam kesetimbangan.</p>

  <form id="equilibriumForm">
    <label for="reaction">Reaksi Kimia:</label>
    <input type="text" id="reaction" placeholder="Contoh: N2 + 3H2 â†” 2NH3" required>

    <label for="initialReactants">Konsentrasi Awal Reaktan (mol/L):</label>
    <input type="text" id="initialReactants" placeholder="Pisahkan dengan koma, contoh: 1.0, 3.0" required>

    <label for="initialProducts">Konsentrasi Awal Produk (mol/L):</label>
    <input type="text" id="initialProducts" placeholder="Pisahkan dengan koma, contoh: 0.0" required>

    <label for="kcValue">Konstanta Kesetimbangan (\(K_c\)):</label>
    <input type="number" id="kcValue" placeholder="Masukkan nilai Kc" step="0.0001" required>

    <button type="button" onclick="calculateEquilibrium()">Hitung Keseimbangan</button>
  </form>
  
  <div id="result" style="margin-top: 20px; font-weight: bold;"></div>
</div>

<script>
  function calculateEquilibrium() {
    // Ambil input pengguna
    const reaction = document.getElementById("reaction").value.trim();
    const initialReactants = document.getElementById("initialReactants").value.trim();
    const initialProducts = document.getElementById("initialProducts").value.trim();
    const kc = parseFloat(document.getElementById("kcValue").value);

    // Validasi input
    if (!reaction || !initialReactants || !initialProducts || isNaN(kc)) {
      document.getElementById("result").textContent = "Harap isi semua data dengan benar!";
      return;
    }

    // Parsing konsentrasi awal
    const reactants = initialReactants.split(",").map(Number);
    const products = initialProducts.split(",").map(Number);

    if (reactants.some(isNaN) || products.some(isNaN)) {
      document.getElementById("result").textContent = "Konsentrasi awal harus berupa angka, dipisahkan dengan koma.";
      return;
    }

    // Algoritma sederhana (perkiraan kesetimbangan)
    // Catatan: Perhitungan lengkap memerlukan iterasi untuk nilai x yang lebih kompleks
    let x = 0.1; // Asumsi awal perubahan konsentrasi
    const calculatedKc = (products[0] + x) * (products[1] + x) / ((reactants[0] - x) * (reactants[1] - x));

    // Tampilkan hasil
    document.getElementById("result").innerHTML = `
      <p>Reaksi: <strong>${reaction}</strong></p>
      <p>Konsentrasi pada kesetimbangan:</p>
      <ul>
        <li>Reaktan: ${(reactants[0] - x).toFixed(4)}, ${(reactants[1] - x).toFixed(4)}</li>
        <li>Produk: ${(products[0] + x).toFixed(4)}, ${(products[1] + x).toFixed(4)}</li>
      </ul>
      <p>Konstanta Kesetimbangan (\(K_c\)): ${calculatedKc.toFixed(4)}</p>
    `;
  }
</script>

<style>
  #equilibrium-calculator {
    max-width: 500px;
    margin: 20px auto;
    padding: 20px;
    border: 1px solid #ddd;
    border-radius: 5px;
    background-color: #f9f9f9;
    font-family: Arial, sans-serif;
  }
  #equilibrium-calculator h3 {
    text-align: center;
    color: #333;
  }
  #equilibrium-calculator label {
    display: block;
    margin-bottom: 5px;
    font-weight: bold;
  }
  #equilibrium-calculator input {
    width: calc(100% - 10px);
    padding: 8px;
    margin-bottom: 15px;
    border: 1px solid #ccc;
    border-radius: 3px;
  }
  #equilibrium-calculator button {
    width: 100%;
    padding: 10px;
    background-color: #007BFF;
    color: white;
    border: none;
    border-radius: 3px;
    cursor: pointer;
    font-size: 16px;
  }
  #equilibrium-calculator button:hover {
    background-color: #0056b3;
  }
</style>
